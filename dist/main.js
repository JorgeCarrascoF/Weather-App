(()=>{"use strict";class e{constructor(e,t,a,s,o,d,r,i){this.city=e,this.day0Weather=t,this.day1Weather=a,this.day2Weather=s,this.day3Weather=o,this.wind=d,this.temperature=r,this.aqi=i}}const t=document.getElementsByClassName("card"),a=["January","February","March","April","May","June","July","August","September","October","November","December"],s=document.getElementById("day0-date"),o=document.getElementById("day1-date"),d=document.getElementById("day2-date"),r=document.getElementById("day3-date"),i=document.getElementById("changeCity"),n=document.getElementById("changeCityForm"),l=document.getElementById("sendNewCity"),c=document.getElementById("cityInput");let h=new Date;function y(){n.classList.toggle("disabled")}async function g(t){try{const a=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=79b42905ecf043c6ac9112356232506&q=${t}&days=4&aqi=yes`,{mode:"cors"}),s=await a.json();let o=s.forecast.forecastday[0].day.condition.text,d=s.forecast.forecastday[1].day.condition.text,r=s.forecast.forecastday[2].day.condition.text,i=s.forecast.forecastday[3].day.condition.text,n=new Date,l=s.forecast.forecastday[0].hour[n.getHours()].wind_kph,c=s.forecast.forecastday[0].hour[n.getHours()].temp_c,h=s.forecast.forecastday[0].day.air_quality["gb-defra-index"];!function(e){let t=e.day0Weather,a=e.day1Weather,s=e.day2Weather,o=e.day3Weather,d=e.wind,r=e.temperature,i=e.aqi;document.getElementById("currentCity").innerText=`Current city: ${e.city}`,y(),u(),setTimeout((function(){!function(e,t,a,s,o,d,r){let i=document.getElementById("day0sunny"),n=document.getElementById("day0cloud"),l=document.getElementById("day0rain"),c=document.getElementById("day0snow"),h=document.getElementById("day0thunder"),y=document.getElementById("day0-text");const g=document.querySelector("body");y.innerText=e,i.classList.add("disabled"),n.classList.add("disabled"),l.classList.add("disabled"),c.classList.add("disabled"),h.classList.add("disabled"),"Sunny"==e?(i.classList.remove("disabled"),g.style.backgroundImage="url(https://images.unsplash.com/photo-1485809069980-bdd865d520ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80)"):"Partly cloudy"==e||"Cloudy"==e||"Overcast"==e||"Mist"==e||"Fog"==e||"Freezing fog"==e?(n.classList.remove("disabled"),g.style.backgroundImage="url(https://images.unsplash.com/photo-1485249245068-d8dc50b77cc7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1931&q=80)"):"Patchy rain possible"==e||"Patchy light rain"==e||"Light rain"==e||"Moderate rain at times"==e||"Moderate rain"==e||"Heavy rain"==e||"Light freezing rain"==e||"Moderate or heavy freezing rain"==e||"Light rain shower"==e||"Moderate or heavy rain shower"==e||"Torrential rain shower"==e?(l.classList.remove("disabled"),g.style.backgroundImage="url(https://images.unsplash.com/photo-1513172128806-2d00531a9f20?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80)"):"Blowing snow"==e||"Blizzard"==e||"Patchy snow possible"==e||"Patchy sleet possible"==e||"Patchy freezing drizzle possible"==e||"Freezing drizzle"==e||"Heavy freezing drizzle"==e||"Light sleet"==e||"Moderate or heavy sleet"==e||"Patchy light snow"==e||"Light snow"==e||"patchy moderate snow"==e||"Moderate snow,"==e||"Patchy heavy snow"==e||"Heavy snow"==e||"Ice pellets"==e||"Light sleet showers"==e||"Moderate or heavy sleet showers"==e||"Light snow showers"==e||"Moderate or heavy snow showers"==e||"Light shower of ice pellets"==e||"Moderate or heavy showers of ice pellets"==e||"Moderate or heavy snow with thunder"==e?(c.classList.remove("disabled"),g.style.backgroundImage="url(https://images.unsplash.com/photo-1517124686104-3830fbe48de6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80)"):"Thundery outbreaks possible"!=e&&"Patchy light rain with thunder"!=e&&"Moderate or heavy rain with thunder"!=e||(h.classList.remove("disabled"),g.style.backgroundImage="url(https://images.unsplash.com/photo-1537036017783-64573b29adb9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1925&q=80)");let u=document.getElementById("day1sunny"),m=document.getElementById("day1cloud"),w=document.getElementById("day1rain"),f=document.getElementById("day1snow"),b=document.getElementById("day1thunder");document.getElementById("day1-text").innerText=t,u.classList.add("disabled"),m.classList.add("disabled"),w.classList.add("disabled"),f.classList.add("disabled"),b.classList.add("disabled"),"Sunny"==t?u.classList.remove("disabled"):"Partly cloudy"==t||"Cloudy"==t||"Overcast"==t||"Mist"==t||"Fog"==t||"Freezing fog"==t?m.classList.remove("disabled"):"Patchy rain possible"==t||"Patchy light rain"==t||"Light rain"==t||"Moderate rain at times"==t||"Moderate rain"==t||"Heavy rain"==t||"Light freezing rain"==t||"Moderate or heavy freezing rain"==t||"Light rain shower"==t||"Moderate or heavy rain shower"==t||"Torrential rain shower"==t?w.classList.remove("disabled"):"Blowing snow"==t||"Blizzard"==t||"Patchy snow possible"==t||"Patchy sleet possible"==t||"Patchy freezing drizzle possible"==t||"Freezing drizzle"==t||"Heavy freezing drizzle"==t||"Light sleet"==t||"Moderate or heavy sleet"==t||"Patchy light snow"==t||"Light snow"==t||"patchy moderate snow"==t||"Moderate snow,"==t||"Patchy heavy snow"==t||"Heavy snow"==t||"Ice pellets"==t||"Light sleet showers"==t||"Moderate or heavy sleet showers"==t||"Light snow showers"==t||"Moderate or heavy snow showers"==t||"Light shower of ice pellets"==t||"Moderate or heavy showers of ice pellets"==t||"Moderate or heavy snow with thunder"==t?f.classList.remove("disabled"):"Thundery outbreaks possible"!=t&&"Patchy light rain with thunder"!=t&&"Moderate or heavy rain with thunder"!=t||b.classList.remove("disabled");let v=document.getElementById("day2sunny"),L=document.getElementById("day2cloud"),p=document.getElementById("day2rain"),M=document.getElementById("day2snow"),B=document.getElementById("day2thunder");v.classList.add("disabled"),L.classList.add("disabled"),p.classList.add("disabled"),M.classList.add("disabled"),B.classList.add("disabled"),document.getElementById("day2-text").innerText=a,"Sunny"==a?v.classList.remove("disabled"):"Partly cloudy"==a||"Cloudy"==a||"Overcast"==a||"Mist"==a||"Fog"==a||"Freezing fog"==a?L.classList.remove("disabled"):"Patchy rain possible"==a||"Patchy light rain"==a||"Light rain"==a||"Moderate rain at times"==a||"Moderate rain"==a||"Heavy rain"==a||"Light freezing rain"==a||"Moderate or heavy freezing rain"==a||"Light rain shower"==a||"Moderate or heavy rain shower"==a||"Torrential rain shower"==a?p.classList.remove("disabled"):"Blowing snow"==a||"Blizzard"==a||"Patchy snow possible"==a||"Patchy sleet possible"==a||"Patchy freezing drizzle possible"==a||"Freezing drizzle"==a||"Heavy freezing drizzle"==a||"Light sleet"==a||"Moderate or heavy sleet"==a||"Patchy light snow"==a||"Light snow"==a||"patchy moderate snow"==a||"Moderate snow,"==a||"Patchy heavy snow"==a||"Heavy snow"==a||"Ice pellets"==a||"Light sleet showers"==a||"Moderate or heavy sleet showers"==a||"Light snow showers"==a||"Moderate or heavy snow showers"==a||"Light shower of ice pellets"==a||"Moderate or heavy showers of ice pellets"==a||"Moderate or heavy snow with thunder"==a?M.classList.remove("disabled"):"Thundery outbreaks possible"!=a&&"Patchy light rain with thunder"!=a&&"Moderate or heavy rain with thunder"!=a||B.classList.remove("disabled");let z=document.getElementById("day3sunny"),x=document.getElementById("day3cloud"),I=document.getElementById("day3rain"),E=document.getElementById("day3snow"),P=document.getElementById("day3thunder");z.classList.add("disabled"),x.classList.add("disabled"),I.classList.add("disabled"),E.classList.add("disabled"),P.classList.add("disabled"),document.getElementById("day3-text").innerText=s,"Sunny"==s?z.classList.remove("disabled"):"Partly cloudy"==s||"Cloudy"==s||"Overcast"==s||"Mist"==s||"Fog"==s||"Freezing fog"==s?x.classList.remove("disabled"):"Patchy rain possible"==s||"Patchy light rain"==s||"Light rain"==s||"Moderate rain at times"==s||"Moderate rain"==s||"Heavy rain"==s||"Light freezing rain"==s||"Moderate or heavy freezing rain"==s||"Light rain shower"==s||"Moderate or heavy rain shower"==s||"Torrential rain shower"==s?I.classList.remove("disabled"):"Blowing snow"==s||"Blizzard"==s||"Patchy snow possible"==s||"Patchy sleet possible"==s||"Patchy freezing drizzle possible"==s||"Freezing drizzle"==s||"Heavy freezing drizzle"==s||"Light sleet"==s||"Moderate or heavy sleet"==s||"Patchy light snow"==s||"Light snow"==s||"patchy moderate snow"==s||"Moderate snow,"==s||"Patchy heavy snow"==s||"Heavy snow"==s||"Ice pellets"==s||"Light sleet showers"==s||"Moderate or heavy sleet showers"==s||"Light snow showers"==s||"Moderate or heavy snow showers"==s||"Light shower of ice pellets"==s||"Moderate or heavy showers of ice pellets"==s||"Moderate or heavy snow with thunder"==s?E.classList.remove("disabled"):"Thundery outbreaks possible"!=s&&"Patchy light rain with thunder"!=s&&"Moderate or heavy rain with thunder"!=s||P.classList.remove("disabled"),document.getElementById("windSpeed").innerText=`${o} km/h`,document.getElementById("currentTemp").innerText=`${d}ÂºC`,document.getElementById("currentAQI").innerText=`Air quality: ${r}`,document.getElementById("AQIadvice").innerText=r<=3?"Low risk. Enjoy outdoor activities!":r>=4&&r<=6?"Moderate risk. If you suffer of heart problems, or experience symptoms, consider reducing strenous physical activity outdoors.":r>=7&&r<=9?"High risk. If you suffer of lung/heart problems, or experience symptoms, consider reducing physical activities outdoor.":"Very high risk. Reduce outdoors activity if you experience symptoms such as cough and sore throat."}(t,a,s,o,d,r,i)}),500),setTimeout(u,1e3)}(new e(t,o,d,r,i,l,c,h))}catch(e){document.getElementById("errorMessage").classList.remove("disabled")}}function u(){for(let e of t)e.classList.toggle("closed")}s.innerText=`Today, ${a[h.getMonth()]} ${h.getDate()}`,h.setDate(h.getDate()+1),o.innerText=`${a[h.getMonth()]} ${h.getDate()}`,h.setDate(h.getDate()+1),d.innerText=`${a[h.getMonth()]} ${h.getDate()}`,h.setDate(h.getDate()+1),r.innerText=`${a[h.getMonth()]} ${h.getDate()}`,i.addEventListener("click",y),l.addEventListener("click",(()=>{let e=c.value;document.getElementById("errorMessage").classList.add("disabled"),g(e)})),g("Madrid")})();